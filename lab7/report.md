# Лабораторна робота 7 Харченко Віталій ІКМ-223Б
### Завдання 1. Збережіть наступні дані до колекції

1. **Підключення до MongoDB та вибір колекції:**
   ```python
   client = pymongo.MongoClient("mongodb://localhost:27017/")
   db = client["mydatabase"]
   collection = db["mycollection"]
   ```
   У цьому розділі коду створюється підключення до бази даних MongoDB, вибирається конкретна база даних (`mydatabase`) та колекція (`mycollection`), з якою буде працювати програма.

2. **Дані для вставки:**
   ```python
   data = [
       # ... (список об'єктів з географічними даними для вставки)
   ]
   ```
   В цьому розділі коду містяться об'єкти з географічними даними, які будуть вставлені у колекцію.

3. **Вставка даних у колекцію:**
   ```python
   collection.insert_many(data)
   ```
   Ця операція вставляє дані у вибрану колекцію.

### Завдання 2. Створіть 2dsphere індекс з полем location у цій колекції

1. **Створення 2dsphere індексу:**
   ```python
   collection.create_index([("location", pymongo.GEOSPHERE)])
   ```
   У цьому розділі коду створюється географічний індекс для поля "location", який вказує, що це поле містить географічні координати.

### Завдання 3. Знайдіть елементи, котрі знаходяться поруч з точкою -73.9667, 40.78 (максимальна відстань 5000 метрів)

1. **Пошук найближчих елементів:**
   ```python
   nearby_elements = collection.find({
       "location": {
           "$near": {
               "$geometry": center_point,
               "$maxDistance": max_distance
           }
       }
   })
   ```
   У цьому розділі коду виконується пошук найближчих елементів до вказаної центральної точки за допомогою `$near` операції та вказаної максимальної відстані.

### Завдання 4. Знайдіть елементи, котрі знаходяться в межах полігону [[-73, 40], [-74, 40], [-74, 41], [-73, 40]

1. **Пошук елементів в межах полігону:**
   ```python
     polygon_coordinates = [
      [-73, 40],
      [-74, 40],
      [-74, 41],
      [-73, 40]
   ]
   polygon_elements = collection.find({
       "location": {
           "$geoWithin": {
               "$geometry": {
                   "type": "Polygon",
                   "coordinates": [polygon_coordinates]
               }
           }
       }
   })
   ```
   У цьому розділі коду виконується пошук елементів, які знаходяться в межах вказаного полігону за допомогою `$geoWithin` операції та координат полігону.

![Результат](https://media.discordapp.net/attachments/917547349864230912/1167209358384447508/image.png?ex=654d4b6c&is=653ad66c&hm=e50365cc35957ed61e5e6fbc88bf70800a2ec5c4738b49d1fee9870af6f26151&=&width=1440&height=123)